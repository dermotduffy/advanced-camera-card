@use './z-index.scss' as *;

:host {
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  padding: 24px;
  pointer-events: none;
  z-index: $z-index-overlay-message;
}

.backdrop {
  position: absolute;
  inset: 0;
  pointer-events: auto;
}

.message {
  position: relative;
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  gap: 12px;

  width: min(92%, 400px);
  max-height: calc(100% - 48px);
  padding: 20px 24px;
  padding-right: 48px;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--advanced-camera-card-overlay-message-scrollbar-color)
    transparent;

  // Glassmorphism background
  background: var(--advanced-camera-card-overlay-message-background);
  backdrop-filter: var(--advanced-camera-card-overlay-message-backdrop-filter);
  -webkit-backdrop-filter: var(--advanced-camera-card-overlay-message-backdrop-filter);

  // Borders & Edge highlights
  border: var(--advanced-camera-card-overlay-message-border);
  border-top: var(--advanced-camera-card-overlay-message-border-top);
  border-radius: 28px;

  // Shadows
  box-shadow: var(
    --advanced-camera-card-box-shadow-override,
    var(--advanced-camera-card-overlay-message-box-shadow)
  );

  pointer-events: auto;

  // Entry animation (auto-plays on render)
  animation: slideUp 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

// Exit animation
.message.exiting {
  animation: slideDown 0.25s ease-out forwards;
}

@keyframes slideUp {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  60% {
    opacity: 1;
    transform: translateY(-6px) scale(1.02);
  }
  80% {
    transform: translateY(3px) scale(0.98);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes slideDown {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  20% {
    transform: translateY(-4px) scale(1.02);
  }
  100% {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
}

.icon {
  flex-shrink: 0;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--advanced-camera-card-overlay-message-icon-color);
  filter: drop-shadow(
    0 0 8px
      color-mix(
        in oklab,
        var(--advanced-camera-card-overlay-message-icon-color),
        transparent 60%
      )
  );
}

.icon advanced-camera-card-icon {
  --mdc-icon-size: 20px;
}

.text {
  flex: 1;
  font-size: 15px;
  font-weight: 400;
  line-height: 1.5;
  color: var(--advanced-camera-card-overlay-message-text-color);
  word-break: break-word;
}

.close {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  border-radius: 50%;

  background: color-mix(
    in srgb,
    var(--advanced-camera-card-overlay-message-close-color),
    transparent 95%
  );
  color: color-mix(
    in srgb,
    var(--advanced-camera-card-overlay-message-close-color),
    transparent 40%
  );

  cursor: pointer;
  transition: all 0.15s ease;
}

.close:hover {
  background: color-mix(
    in srgb,
    var(--advanced-camera-card-overlay-message-close-color),
    transparent 90%
  );
  color: var(--advanced-camera-card-overlay-message-close-color);
}

.close advanced-camera-card-icon {
  --mdc-icon-size: 18px;
}
